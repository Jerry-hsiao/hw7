(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b0be31d"],{"00b4":function(e,t,a){"use strict";a("ac1f");var c=a("23e7"),n=a("da84"),o=a("c65b"),r=a("e330"),l=a("1626"),s=a("861d"),i=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),d=n.Error,u=r(/./.test);c({target:"RegExp",proto:!0,forced:!i},{test:function(e){var t=this.exec;if(!l(t))return u(this,e);var a=o(t,this,e);if(null!==a&&!s(a))throw new d("RegExp exec method returned something other than an Object or null");return!!a}})},"07ac":function(e,t,a){var c=a("23e7"),n=a("6f53").values;c({target:"Object",stat:!0},{values:function(e){return n(e)}})},"6f53":function(e,t,a){var c=a("83ab"),n=a("e330"),o=a("df75"),r=a("fc6a"),l=a("d1e7").f,s=n(l),i=n([].push),d=function(e){return function(t){var a,n=r(t),l=o(n),d=l.length,u=0,m=[];while(d>u)a=l[u++],c&&!s(n,a)||i(m,e?[a,n[a]]:n[a]);return m}};e.exports={entries:d(!0),values:d(!1)}},"99af":function(e,t,a){"use strict";var c=a("23e7"),n=a("da84"),o=a("d039"),r=a("e8b5"),l=a("861d"),s=a("7b0b"),i=a("07fa"),d=a("8418"),u=a("65f0"),m=a("1dde"),b=a("b622"),p=a("2d00"),h=b("isConcatSpreadable"),j=9007199254740991,g="Maximum allowed index exceeded",f=n.TypeError,O=p>=51||!o((function(){var e=[];return e[h]=!1,e.concat()[0]!==e})),v=m("concat"),V=function(e){if(!l(e))return!1;var t=e[h];return void 0!==t?!!t:r(e)},N=!O||!v;c({target:"Array",proto:!0,forced:N},{concat:function(e){var t,a,c,n,o,r=s(this),l=u(r,0),m=0;for(t=-1,c=arguments.length;t<c;t++)if(o=-1===t?r:arguments[t],V(o)){if(n=i(o),m+n>j)throw f(g);for(a=0;a<n;a++,m++)a in o&&d(l,m,o[a])}else{if(m>=j)throw f(g);d(l,m++,o)}return l.length=m,l}})},b0c0:function(e,t,a){var c=a("83ab"),n=a("5e77").EXISTS,o=a("e330"),r=a("9bf2").f,l=Function.prototype,s=o(l.toString),i=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,d=o(i.exec),u="name";c&&!n&&r(l,u,{configurable:!0,get:function(){try{return d(i,s(this))[1]}catch(e){return""}}})},dd67:function(e,t,a){"use strict";a.r(t);var c=a("7a23"),n={class:"container"},o=Object(c["createElementVNode"])("div",{class:"loadingio-spinner-rolling-veo1w6059cj"},[Object(c["createElementVNode"])("div",{class:"ldio-blnks7uamwl"},[Object(c["createElementVNode"])("div")])],-1),r=Object(c["createElementVNode"])("br",null,null,-1),l={class:"mt-4"},s={class:"table align-middle"},i=Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("th",null,"圖片"),Object(c["createElementVNode"])("th",null,"商品名稱"),Object(c["createElementVNode"])("th",null,"價格"),Object(c["createElementVNode"])("th")])],-1),d={style:{width:"200px"}},u={key:0,class:"h5"},m={key:1,class:"h6"},b={key:2,class:"h5"},p={class:"btn-group btn-group-sm"},h=["onClick","disabled"],j={class:"spinner-grow spinner-grow-sm"},g=Object(c["createTextVNode"])(" 查看更多 "),f=["onClick","disabled"],O={class:"spinner-grow spinner-grow-sm"},v=Object(c["createTextVNode"])(" 加到購物車 ");function V(e,t,a,V,N,E){var y=Object(c["resolveComponent"])("Loading"),x=Object(c["resolveComponent"])("CartView");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",n,[Object(c["createVNode"])(y,{active:N.isLoading,"z-index":1060},{default:Object(c["withCtx"])((function(){return[o]})),_:1},8,["active"]),r,Object(c["createElementVNode"])("div",l,[Object(c["createElementVNode"])("table",s,[i,Object(c["createElementVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(N.products,(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:e.id},[Object(c["createElementVNode"])("td",d,[Object(c["createElementVNode"])("div",{style:Object(c["normalizeStyle"])([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:"url(".concat(e.imageUrl,")")}])},null,4)]),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.title),1),Object(c["createElementVNode"])("td",null,[e.price?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",u,Object(c["toDisplayString"])(e.origin_price)+" 元 ",1)),e.price?(Object(c["openBlock"])(),Object(c["createElementBlock"])("del",m,"原價 "+Object(c["toDisplayString"])(e.origin_price)+" 元",1)):Object(c["createCommentVNode"])("",!0),e.price?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",b," 現在只要 "+Object(c["toDisplayString"])(e.price)+" 元 ",1)):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("div",p,[Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-outline-secondary",onClick:function(t){return E.getProduct(e)},disabled:N.loadingStatus.loadingItem===e.id},[Object(c["withDirectives"])(Object(c["createElementVNode"])("span",j,null,512),[[c["vShow"],N.loadingStatus.loadingItem===e.id]]),g],8,h),Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-outline-danger",onClick:function(t){return E.addToCart(e.id)},disabled:N.loadingStatus.loadingItem===e.id},[Object(c["withDirectives"])(Object(c["createElementVNode"])("span",O,null,512),[[c["vShow"],N.loadingStatus.loadingItem===e.id]]),v],8,f)])])])})),128))])])]),Object(c["createVNode"])(x)])}a("99af"),a("07ac"),a("b0c0");var N={class:"text-end"},E=["disabled"],y=Object(c["createElementVNode"])("i",{class:"bi bi-x-circle"},null,-1),x=Object(c["createTextVNode"])(" 清空購物車 "),S=[y,x],k={class:"table align-middle"},C=Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("th"),Object(c["createElementVNode"])("th",null,"品名"),Object(c["createElementVNode"])("th",{style:{width:"150px"}},"數量/單位"),Object(c["createElementVNode"])("th",null,"單價"),Object(c["createElementVNode"])("th",null,"單筆總價")])],-1),w=["onClick","disabled"],L=Object(c["createElementVNode"])("i",{class:"fas fa-spinner fa-pulse"},null,-1),$=Object(c["createTextVNode"])(" x "),D=[L,$],B={class:"input-group input-group-sm"},I={class:"input-group mb-3"},M=["onUpdate:modelValue","onChange","disabled"],F=["value"],q={class:"input-group-text",id:"basic-addon2"},z={class:"text-end"},P={class:"text-end"},T=Object(c["createElementVNode"])("td",{colspan:"4",class:"text-end"},"總計",-1),U={class:"text-end"},_={class:"my-5 row justify-content-center"},A={class:"mb-3"},J=Object(c["createElementVNode"])("label",{for:"email",class:"form-label"},"Email",-1),R={class:"mb-3"},X=Object(c["createElementVNode"])("label",{for:"name",class:"form-label"},"收件人姓名",-1),G={class:"mb-3"},H=Object(c["createElementVNode"])("label",{for:"tel",class:"form-label"},"收件人電話",-1),K={class:"mb-3"},Q=Object(c["createElementVNode"])("label",{for:"address",class:"form-label"},"收件人地址",-1),W={class:"mb-3"},Y=Object(c["createElementVNode"])("label",{for:"message",class:"form-label"},"留言",-1),Z={class:"text-end"},ee=["disabled"];function te(e,t,a,n,o,r){var l=Object(c["resolveComponent"])("Loading"),s=Object(c["resolveComponent"])("Field"),i=Object(c["resolveComponent"])("ErrorMessage"),d=Object(c["resolveComponent"])("Form");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",null,[Object(c["createVNode"])(l,{active:o.isLoading,"z-index":1060},null,8,["active"]),Object(c["createElementVNode"])("div",null,[Object(c["createElementVNode"])("div",N,[Object(c["createElementVNode"])("button",{class:"btn btn-outline-danger",type:"button",onClick:t[0]||(t[0]=function(){return r.removeCartAll&&r.removeCartAll.apply(r,arguments)}),disabled:!o.cartData.carts||0===o.cartData.carts.length},S,8,E)]),Object(c["createElementVNode"])("table",k,[C,Object(c["createElementVNode"])("tbody",null,[o.cartData.carts?(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],{key:0},Object(c["renderList"])(o.cartData.carts,(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:e.id},[Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(t){return r.removeCart(e.id)},disabled:o.loadingStatus.loadingItem===e.id},D,8,w)]),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.product.title),1),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("div",B,[Object(c["createElementVNode"])("div",I,[Object(c["withDirectives"])(Object(c["createElementVNode"])("select",{class:"form-select","onUpdate:modelValue":function(t){return e.qty=t},onChange:function(t){return r.updateCart(e)},disabled:o.loadingStatus.loadingItem===e.id},[(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(50,(function(e){return Object(c["createElementVNode"])("option",{value:e,key:e+"item.id"},Object(c["toDisplayString"])(e),9,F)})),64))],40,M),[[c["vModelSelect"],e.qty]]),Object(c["createElementVNode"])("span",q,Object(c["toDisplayString"])(e.product.unit),1)])])]),Object(c["createElementVNode"])("td",z,Object(c["toDisplayString"])(e.product.price),1),Object(c["createElementVNode"])("td",P,Object(c["toDisplayString"])(e.total),1)])})),128)):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("tfoot",null,[Object(c["createElementVNode"])("tr",null,[T,Object(c["createElementVNode"])("td",U,Object(c["toDisplayString"])(o.cartData.final_total),1)])])]),Object(c["createElementVNode"])("div",_,[Object(c["createVNode"])(d,{ref:"form",class:"col-md-6",onSubmit:r.createOrder},{default:Object(c["withCtx"])((function(e){var a=e.errors;return[Object(c["createElementVNode"])("div",A,[J,Object(c["createVNode"])(s,{id:"email",name:"email",type:"email",class:Object(c["normalizeClass"])(["form-control",{"is-valid":!a["email"]&&o.form.user.email,"is-invalid":a["email"]}]),"data-vv-delay":"1000",placeholder:"請輸入 Email",rules:"email|required",modelValue:o.form.user.email,"onUpdate:modelValue":t[1]||(t[1]=function(e){return o.form.user.email=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(i,{name:"email",class:"invalid-feedback"})]),Object(c["createElementVNode"])("div",R,[X,Object(c["createVNode"])(s,{id:"name",name:"姓名",type:"text",class:Object(c["normalizeClass"])(["form-control",{"is-valid":!a["姓名"]&&o.form.user.name,"is-invalid":a["姓名"]}]),placeholder:"請輸入姓名",rules:{required:!0,max:6},modelValue:o.form.user.name,"onUpdate:modelValue":t[2]||(t[2]=function(e){return o.form.user.name=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(i,{name:"姓名",class:"invalid-feedback"})]),Object(c["createElementVNode"])("div",G,[H,Object(c["createVNode"])(s,{id:"tel",name:"電話",type:"text",class:Object(c["normalizeClass"])(["form-control",{"is-valid":!a["電話"]&&o.form.user.tel,"is-invalid":a["電話"]}]),placeholder:"請輸入電話",rules:r.isPhone,modelValue:o.form.user.tel,"onUpdate:modelValue":t[3]||(t[3]=function(e){return o.form.user.tel=e})},null,8,["class","rules","modelValue"]),Object(c["createVNode"])(i,{name:"電話",class:"invalid-feedback"})]),Object(c["createElementVNode"])("div",K,[Q,Object(c["createVNode"])(s,{id:"address",name:"地址",type:"text",class:Object(c["normalizeClass"])(["form-control",{"is-valid":!a["地址"]&&o.form.user.address,"is-invalid":a["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:o.form.user.address,"onUpdate:modelValue":t[4]||(t[4]=function(e){return o.form.user.address=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(i,{name:"地址",class:"invalid-feedback"})]),Object(c["createElementVNode"])("div",W,[Y,Object(c["createVNode"])(s,{name:"留言",id:"message",class:"form-control",cols:"30",rows:"10",modelValue:o.form.message,"onUpdate:modelValue":t[5]||(t[5]=function(e){return o.form.message=e})},null,8,["modelValue"])]),Object(c["createElementVNode"])("div",Z,[Object(c["createElementVNode"])("button",{type:"submit",class:"btn btn-danger",disabled:!o.cartData.carts||0===o.cartData.carts.length||a["email"]||a["電話"]||a["姓名"]||a["地址"]}," 送出訂單 ",8,ee)])]})),_:1},8,["onSubmit"])])])])}a("ac1f"),a("00b4");var ae={data:function(){return{cartData:{carts:[]},form:{user:{name:"",email:"",tel:"",address:""},message:""},loadingStatus:{loadingItem:""},isLoading:!1}},methods:{getCarts:function(){var e=this;this.isLoading=!0,this.$http.get("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("hexschooljerry","/cart")).then((function(t){e.cartData=t.data.data,e.isLoading=!1})).catch((function(t){e.isLoading=!1,e.$httpMessageState(t.response,"購物車列表")}))},removeCart:function(e){var t=this;this.isLoading=!0,this.loadingStatus.loadingItem=e,this.$http.delete("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("hexschooljerry","/cart/").concat(e)).then((function(e){t.$httpMessageState(e,"刪除"),t.getCarts(),t.isLoading=!1,t.loadingStatus.loadingItem=""})).catch((function(e){t.isLoading=!1,t.loadingStatus.loadingItem="",t.$httpMessageState(e.response,"刪除")}))},removeCartAll:function(){var e=this;this.isLoading=!0,this.$http.delete("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("hexschooljerry","/carts")).then((function(t){e.$httpMessageState(t,"刪除"),e.getCarts(),e.isLoading=!1})).catch((function(t){e.isLoading=!1,e.$httpMessageState(t.response,"刪除")}))},updateCart:function(e){var t=this;this.isLoading=!0,this.loadingStatus.loadingItem=e.id;var a="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("hexschooljerry","/cart/").concat(e.id),c={product_id:e.product_id,qty:e.qty};this.$http.put(a,{data:c}).then((function(e){t.$httpMessageState(e,"更新數量"),t.getCarts(),t.loadingStatus.loadingItem="",t.isLoading=!1})).catch((function(e){t.isLoading=!1,t.$httpMessageState(e.response,"更新數量")}))},createOrder:function(){var e=this;this.isLoading=!0;var t="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("hexschooljerry","/order"),a=this.form;this.$http.post(t,{data:a}).then((function(t){e.$httpMessageState(t,"新增訂單"),e.$refs.form.resetForm(),e.emptyForm(),e.getCarts(),e.isLoading=!1})).catch((function(t){e.isLoading=!1,e.$httpMessageState(t,"新增訂單")}))},isPhone:function(e){var t=/^(09)[0-9]{8}$/;return!!t.test(e)||"需要正確的電話號碼"},emptyForm:function(){this.form.user.name="",this.form.user.address="",this.form.user.email="",this.form.user.tel="",this.form.message=""}},mounted:function(){this.getCarts()}},ce=a("6b0d"),ne=a.n(ce);const oe=ne()(ae,[["render",te]]);var re=oe,le={data:function(){return{cartData:{carts:[]},products:[],product:{},productId:"",isLoading:!1,loadingStatus:{loadingItem:""},seed:""}},components:{CartView:re},methods:{getProducts:function(){var e=this;this.isLoading=!0,this.$http.get("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("hexschooljerry","/products/all")).then((function(t){e.products=Object.values(t.data.products),e.isLoading=!1})).catch((function(t){e.$httpMessageState(t.response,"產品列表錯誤訊息")}))},getProduct:function(e){this.$router.push("/user/product/".concat(e.id))},addToCart:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.isLoading=!0,this.loadingStatus.loadingItem=e;var c="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("hexschooljerry","/cart"),n={product_id:e,qty:a};this.$http.post(c,{data:n}).then((function(e){t.$httpMessageState(e,"購物車增加"),t.getCarts(),t.loadingStatus.loadingItem="",t.isLoading=!1,t.$refs.orderProductModal.hideModal(),t.$refs.orderProductModal.emptyLoading()})).catch((function(e){t.$httpMessageState(e.response,"購物車增加")}))}},mounted:function(){this.getProducts()}};const se=ne()(le,[["render",V]]);t["default"]=se}}]);
//# sourceMappingURL=chunk-1b0be31d.87b68dec.js.map